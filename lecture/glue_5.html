<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test</title>
</head>
<body>

    <h3>날씨 확인하기</h3>

    <form onsubmit="return getWeather();">
        <label>
            지역 선택:
            <select id="city">
                <option value="">-- 지역을 선택하세요 --</option>
                <option value="seoul">서울</option>
                <option value="busan">부산</option>
                <option value="daegu">대구</option>
                <option value="incheon">인천</option>
                <option value="gwangju">광주</option>
            </select>
        </label>
        <br><br>
        <button type="submit">날씨 확인하기</button>
    </form>

    <script>
        function getWeather() {
            let city = document.getElementById("city").value;

            if (city === "") {
                alert("지역을 선택하세요.");
                return false;
            }

            // 도시별 위도/경도 (API 호출용)
            const coords = {
                seoul:   { lat: 37.5665, lon: 126.9780 },
                busan:   { lat: 35.1796, lon: 129.0756 },
                daegu:   { lat: 35.8714, lon: 128.6014 },
                incheon: { lat: 37.4563, lon: 126.7052 },
                gwangju: { lat: 35.1595, lon: 126.8526 }
            };

            const lat = coords[city].lat;
            const lon = coords[city].lon;

            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;

            // 외부 API 호출
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log("=== 날씨 정보 ===");
                    console.log("도시:", city);
                    console.log("온도:", data.current_weather.temperature);
                    console.log("풍속:", data.current_weather.windspeed);
                    console.log("전체 응답:", data);
                })
                .catch(error => {
                    console.error("에러 발생:", error);
                });

            return false; // 폼 실제 전송 막기
        }
    </script>

</body>
</html>
